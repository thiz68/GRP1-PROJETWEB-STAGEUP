
<!DOCTYPE html>
<html> 
<head> 
	<meta charset="utf-8">
	<meta name="author" content="Clery G">
	<link rel="stylesheet" href="http://stage.up/static/modif_compte_etudiant.css">
    <script src="http://stage.up/static/include.js" defer></script>
	<title>Modification du compte Étudiant</title> 
</head> 

<body>

	<header>
        <!-- Navbar -->
        <div data-include="http://stage.up/static/navbar.html"></div>
    </header>
<body>

    <div class="container">
        <form class="modification-form" action="index.php" method="post">
            <input type="hidden" name="uri" value="modif_compte_etudiant">
            <input type="hidden" name="id_etudiant" value="{{ id_etudiant }}">
            <h1>Modification compte Étudiant</h1>
            
            <div class="form-group">
                <label for="nouveau-nom">Nouveau Nom</label>
                <input type="text" id="nouveau-nom" name="nom">
            </div>
            
            <div class="form-group">
                <label for="nouveau-prenom">Nouveau Prénom</label>
                <input type="text" id="nouveau-prenom" name="prenom">
            </div>
            
            <div class="form-group">
                <label for="nouvel-email">Nouvel Email</label>
                <input type="email" id="nouvel-email" name="email">
            </div>

            <div class="button-group">
                <a class ="btn btn-secondary" href="?uri=supp_compte_etudiant" class="nav-link">Supprimer le compte</a>
                <button type="submit" class="btn btn-primary">Sauvegarder</button>
            </div>
        </form>
    </div>

<!-- Footer -->
<div data-include="http://stage.up/static/footer.html"></div>
    
    
<script>
            // Fonction de validation d'email
            function validateEmail(email) {
            // Vérifie la présence de @ et de .
            if (!email.includes('@')) {
                return false;
            }

            // Vérifie que @ n'est pas au début ou à la fin
            const parts = email.split('@');
            if (parts.length !== 2 || parts[0].length === 0 || parts[1].length === 0) {
                return false;
            }

            // Vérifie la présence d'un point après @
            const domainParts = parts[1].split('.');
            if (domainParts.length < 2 || domainParts[domainParts.length - 1].length < 2) {
                return false;
            }

            // Vérifie qu'il n'y a pas de caractères spéciaux consécutifs
            if (/[.@]{2,}/.test(email)) {
                return false;
            }

            return true;
        }

        // Validation en temps réel
        document.getElementById('email').addEventListener('input', function() {
            const emailInput = this;
            const emailError = document.getElementById('emailError');

            if (validateEmail(emailInput.value)) {
                emailInput.classList.remove('invalid');
                emailError.style.display = 'none';
            } else {
                emailInput.classList.add('invalid');
                emailError.style.display = 'block';
            }
        });

        // Validation à la soumission du formulaire
        document.getElementById('studentForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const nomInput = document.getElementById('nom');
            const prenomInput = document.getElementById('prenom');
            const emailInput = document.getElementById('email');
            const emailError = document.getElementById('emailError');

            // Validation de tous les champs
            let isValid = true;

            // Validation du nom
            if (nomInput.value.trim() === '') {
                nomInput.classList.add('invalid');
                isValid = false;
            } else {
                nomInput.classList.remove('invalid');
            }

            // Validation du prénom
            if (prenomInput.value.trim() === '') {
                prenomInput.classList.add('invalid');
                isValid = false;
            } else {
                prenomInput.classList.remove('invalid');
            }

            // Validation de l'email
            if (!validateEmail(emailInput.value)) {
                emailInput.classList.add('invalid');
                emailError.style.display = 'block';
                isValid = false;
            } else {
                emailInput.classList.remove('invalid');
                emailError.style.display = 'none';
            }

            // Si tout est valide, soumettre le formulaire
            if (isValid) {
                alert('Formulaire soumis avec succès !');
                // Ici, vous pourriez ajouter une logique d'envoi de formulaire
            }
        });

        function resetForm() {
            document.getElementById('studentForm').reset();
            
            // Réinitialiser les classes et messages d'erreur
            document.getElementById('nom').classList.remove('invalid');
            document.getElementById('prenom').classList.remove('invalid');
            document.getElementById('email').classList.remove('invalid');
            document.getElementById('emailError').style.display = 'none';
        }

        function goBack() {
            window.history.back();
        }
</script>

</body>
</html>